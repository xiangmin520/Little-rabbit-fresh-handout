# åŸºç¡€å¸ƒå±€å’Œè·¯ç”±

`æœ¬èŠ‚ç›®æ ‡:`   å®Œæˆå•†å“è¯¦æƒ…çš„åŸºç¡€å¸ƒå±€å’Œè·¯ç”±é…ç½®

<img src="assets/detail/01.png" style="zoom:48%;" />

1ï¼‰æ–°å»ºé¡µé¢ç»„ä»¶

`src/views/goods/index.vue`

```vue
<template>
  <div class='xtx-goods-page'>
    <div class="container">
      <!-- é¢åŒ…å±‘ -->
      <XtxBread>
        <XtxBreadItem to="/">é¦–é¡µ</XtxBreadItem>
        <XtxBreadItem to="/">æ‰‹æœº</XtxBreadItem>
        <XtxBreadItem to="/">åä¸º</XtxBreadItem>
        <XtxBreadItem to="/">p30</XtxBreadItem>
      </XtxBread>
      <!-- å•†å“ä¿¡æ¯ -->
      <div class="goods-info"></div>
      <!-- å•†å“è¯¦æƒ… -->
      <div class="goods-footer">
        <div class="goods-article">
          <!-- å•†å“+è¯„ä»· -->
          <div class="goods-tabs"></div>
        </div>
        <!-- 24çƒ­æ¦œ+ä¸“é¢˜æ¨è -->
        <div class="goods-aside"></div>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  name: 'XtxGoodsPage'
}
</script>

<style scoped lang='less'>
.goods-info {
  min-height: 600px;
  background: #fff;
}
.goods-footer {
  display: flex;
  margin-top: 20px;
  .goods-article {
    width: 940px;
    margin-right: 20px;
  }
  .goods-aside {
    width: 280px;
    min-height: 1000px;
  }
}
.goods-tabs {
  min-height: 600px;
  background: #fff;
}
.goods-warn {
  min-height: 600px;
  background: #fff;
  margin-top: 20px;
}
</style>
```

2ï¼‰è·¯ç”±é…ç½®

`src/router/index.js`

```js
const Goods = () => import('@/views/Goods/index')
children: [
  { path: '/', component: Home },
  { path: '/category/:id', component: TopCategory },
  { path: '/category/sub/:id', component: SubCategory },
  {
        path: '/goods/:id',
        component: Goods
    }
]
```

3ï¼‰æµ‹è¯•è·¯ç”±è·³è½¬

> ç»™æ–°é²œå¥½ç‰©æ¨¡å—ï¼Œæ–°å¢è·¯ç”±è·³è½¬é“¾æ¥

`views/Home/components/home-new.vue`

```html
<RouterLink :to="`/goods/${item.id}`">
  <img :src="item.picture" alt="" />
  <p class="name">{{ item.name }}</p>
  <p class="price">&yen;{{ item.price }}</p>
</RouterLink>
```

# é¢åŒ…å±‘å¯¼èˆªæ¸²æŸ“

`æœ¬èŠ‚ç›®æ ‡:`   ä½¿ç”¨çœŸå®æ•°æ®æ¸²æŸ“é¢åŒ…å±‘å¯¼èˆª

![](assets/detail/03.png)

**å®ç°æ­¥éª¤**

1. å®šä¹‰è·å–å•†å“è¯¦æƒ…APIå‡½æ•°
2. åœ¨ç»„ä»¶setupä¸­è·å–å•†å“è¯¦æƒ…æ•°æ®

**ä»£ç è½åœ°**

1ï¼‰å°è£…APIå‡½æ•° 

`src/api/goods.js`

```js
import request from '@/utils/request'
/**
 * @description: è·å–è¯¦æƒ…æ•°æ®
 * @param {*} id
 * @return {*}
 */
export const findGoods = (id) => {
  return request('/goods', 'get', { id })
}
```

2ï¼‰setupå‡½æ•°ä¸­ä¹¦å†™é€»è¾‘  

`src/views/goods/index.vue`

```js
import { findGoods } from '@/api/goods'
import { ref, watch, onMounted } from 'vue'
import { useRoute } from 'vue-router'

setup () {
    const route = useRoute()
    const goods = ref({})
    async function getGoods () {
      const res = await findGoods(route.params.id)
      goods.value = res.data.result
    }
    onMounted(()=>{
       getGoods()
    })
    return { goods }
 }
```

3ï¼‰æ¸²æŸ“é¢åŒ…å±‘

```vue
<!-- é¢åŒ…å±‘ -->
  <XtxBread v-if="goods.categories">
    <XtxBreadItem to="/">é¦–é¡µ</XtxBreadItem>
    <XtxBreadItem :to="`/category/${goods.categories[1].id}`">
      {{goods.categories[1].name}}
    </XtxBreadItem>
    <XtxBreadItem :to="`/category/sub/${goods.categories[0].id}`">
      {{goods.categories[0].name}}
    </XtxBreadItem>
    <XtxBreadItem to="/">
      {{goods.name}}
    </XtxBreadItem>
  </XtxBread>
```

4ï¼‰é˜²æ­¢æŠ¥é”™ï¼ŒåŠ è½½å®Œæˆgoodså†æ˜¾ç¤ºæ‰€æœ‰å†…å®¹!!

```vue
<XtxBread v-if="goods.categories">
```



# å•†å“ä¸»è¦ä¿¡æ¯åŒºåŸŸ

![](assets/detail/04.png)

## æ•´ä½“ç»“æ„æ‹†åˆ†

```html
<!-- å•†å“ä¿¡æ¯ -->
<div class="goods-info">
    <!-- å›¾ç‰‡é¢„è§ˆåŒº -->
    <div class="media"></div>
    <!-- å•†å“ä¿¡æ¯åŒº -->
    <div class="spec"></div>
</div>
<style>
  .goods-info {
      min-height: 600px;
      background: #fff;
      display: flex;
      .media {
        width: 580px;
        height: 600px;
        padding: 30px 50px;
      }
      .spec {
        flex: 1;
        padding: 30px 30px 30px 0;
      }
    }
</style>
```

## å›¾ç‰‡é¢„è§ˆç»„ä»¶

`æœ¬èŠ‚ç›®æ ‡:`  å®Œæˆå•†å“å›¾ç‰‡çš„é¢„è§ˆå’Œåˆ‡æ¢åŠŸèƒ½

![](assets/detail/05.png)

**å®ç°æ­¥éª¤**

1. æ­å»ºç»„ä»¶é™æ€ç»“æ„
2. ä½¿ç”¨æ¥å£æ•°æ®æ¸²æŸ“
3. å®ç°é¼ æ ‡ç§»å…¥å°å›¾å¤§å›¾åˆ‡æ¢ ï¼ˆæ§åˆ¶curIndexï¼‰

**ä»£ç è½åœ°**

1ï¼‰æ­å»ºç»„ä»¶åŸºç¡€ç»“æ„

`views/Goods/components/goods-image.vue`

```vue
<template>
  <div class="goods-image">
    <div class="middle">
      <img src="https://yanxuan-item.nosdn.127.net/169236494ab1cd54d1c3a73d9c7b4d10.png" alt="">
    </div>
    <ul class="small">
      <li v-for="(img,i) in 5" :key="i">
        <img src="https://yanxuan-item.nosdn.127.net/169236494ab1cd54d1c3a73d9c7b4d10.png" alt="">
      </li>
    </ul>
  </div>
</template>
<script>
import { ref } from 'vue'
export default {
  name: 'GoodsImage'
}
</script>
<style scoped lang="less">
.goods-image {
  width: 480px;
  height: 400px;
  position: relative;
  display: flex;
  .middle {
    width: 400px;
    height: 400px;
    background: #f5f5f5;
  }
  .small {
    width: 80px;
    li {
      width: 68px;
      height: 68px;
      margin-left: 12px;
      margin-bottom: 15px;
      cursor: pointer;
      &:hover,&.active {
        border: 2px solid @xtxColor;
      }
    }
  }
}
</style>
```

2ï¼‰ä½¿ç”¨æ¥å£æ•°æ®æ¸²æŸ“

> æ•°æ®ç”±çˆ¶ç»„ä»¶ä¼ å…¥ï¼Œé€šè¿‡propsæ¥æ”¶

```html
<template>
  <div class="goods-image">
    <div class="middle">
      <img :src="images[currIndex]" alt="">
    </div>
    <ul class="small">
      <li v-for="img in images" :key="img" >
        <img  :src="img" alt="">
      </li>
    </ul>
  </div>
</template>
<script>
import { ref } from 'vue'
export default {
  name: 'GoodsImage',
  props: {
    images: {
      type: Array,
      default: () => []
    }
  },
  setup(){
    const curIndex = ref(0)
    return { curIndex }
  }
}
</script>
```

3ï¼‰å›¾ç‰‡åˆ‡æ¢é€»è¾‘

> é¼ æ ‡ç§»é™¤å“ªä¸ªï¼ŒæŠŠcurrIndexè®¾ç½®ä¸ºå“ªä¸ªçš„ä¸‹æ ‡å€¼

```html
<template>
  <div class="goods-image">
    <div class="middle">
      <img :src="images[currIndex]" alt="">
    </div>
    <ul class="small">
      <li v-for="(img,i) in images" :key="img" :class="{active:i===currIndex}">
        <img @mouseenter="currIndex=i" :src="img" alt="">
      </li>
    </ul>
  </div>
</template>
```

## å›¾ç‰‡æ”¾å¤§é•œ

`æœ¬èŠ‚ç›®æ ‡:`  å®Œæˆå•†å“å›¾ç‰‡çš„æ”¾å¤§é•œåŠŸèƒ½ ï¼ˆåœ¨å›¾ç‰‡é¢„è§ˆç»„ä»¶ä¸­å¢å¼ºåŠŸèƒ½ï¼‰

![](assets/detail/06.png)

**å®ç°æ€è·¯**

1. å‡†å¤‡ç»„ä»¶ç»“æ„
2. æ§åˆ¶è’™å±‚ç§»åŠ¨
3. æ§åˆ¶å¤§å›¾èƒŒæ™¯éšç€è’™å±‚çš„ç§»åŠ¨è€Œç§»åŠ¨

### 1. æ–°å¢ç»“æ„

1ï¼‰å‡†å¤‡å³ä¾§å¤§å›¾å®¹å™¨

> é»˜è®¤ä»¥ç¬¬ä¸€å¼ å›¾ç‰‡ä½œä¸ºèƒŒæ™¯å›¾

```html
<div class="large" :style="[{backgroundImage:`url(${images[currIndex]})`}]"></div>
<div class="middle"></div>

<style>
 .large {
    position: absolute;
    top: 0;
    left: 412px;
    width: 400px;
    height: 400px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    background-repeat: no-repeat;
    background-size: 800px 800px;
    background-color: #f8f8f8;
  }
</style>
```

2ï¼‰å‡†å¤‡æ»‘å—è’™å±‚å®¹å™¨

```html
<div class="middle">
  <img :src="images[currIndex]">
  <!-- è’™å±‚å®¹å™¨ -->
  <div class="layer"></div>
</div>

<style>
.layer {
  width: 200px;
  height: 200px;
  background: rgba(0, 0, 0, 0.2);
  left: 0;
  top: 0;
  position: absolute;
}
</style>
```

### 2. ç†Ÿæ‚‰æ ¸å¿ƒAPI

> å› ä¸ºæ•´ä¸ªäº¤äº’éƒ½æ˜¯éšç€é¼ æ ‡çš„ä½ç½®å˜åŒ–è€Œå˜åŒ–çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€éœ€è¦çš„å°±æ˜¯å¯ä»¥å®æ—¶çš„çŸ¥é“é¼ æ ‡çš„åæ ‡ä½ç½®
>
> `useMouseInElement`ï¼š https://vueuse.org/core/usemouseinelement/#usemouseinelement

```js
setup () {
    const target = ref(null)
    // elementX é¼ æ ‡åŸºäºå®¹å™¨å·¦ä¸Šè§’Xè½´åç§»
    // elementY é¼ æ ‡åŸºäºå®¹å™¨å·¦ä¸Šè§’Yè½´åç§»
    // isOutside é¼ æ ‡æ˜¯å¦åœ¨æ¨¡æ¿å®¹å™¨å¤–
    // ä¸‰ä¸ªå‚æ•°éƒ½æ˜¯refå¯¹è±¡
    const { elementX, elementY, isOutside } = useMouseInElement(target)
    watch([elementX, elementY, isOutside], () => {
       // ç›‘å¬å¤„ç†
    })

    return { target }
  }
```

### 3. æ§åˆ¶æ»‘å—è’™å±‚ç§»åŠ¨

1. æœ€å¤§æœ‰æ•ˆå¯ç§»åŠ¨èŒƒå›´

   ![](assets/detail/07.png)

2. æœ‰æ•ˆç§»åŠ¨èŒƒå›´å†…çš„æ¢ç®—å…³ç³»

   ![](assets/detail/08.png)



æ§åˆ¶è’™å±‚å®¹å™¨æ¨ªå‘å’Œçºµå‘ç§»åŠ¨è·ç¦»

```js
 setup () {
    const target = ref(null)
    // elementX é¼ æ ‡åŸºäºå®¹å™¨å·¦ä¸Šè§’Xè½´åç§»
    // elementY é¼ æ ‡åŸºäºå®¹å™¨å·¦ä¸Šè§’Yè½´åç§»
    // isOutside é¼ æ ‡æ˜¯å¦åœ¨æ¨¡æ¿å®¹å™¨å¤–
    const { elementX, elementY, isOutside } = useMouseInElement(target)
    const left = ref(0) // æ»‘å—è·ç¦»å·¦ä¾§çš„è·ç¦»
    const top = ref(0) // æ»‘å—è·ç¦»é¡¶éƒ¨çš„è·ç¦»
    watch([elementX, elementY, isOutside], () => {
       // æ¨ªå‘ç§»åŠ¨
        if (elementX.value < 100) {
          // å·¦ä¾§æœ€å°è·ç¦»
          left.value = 0
        } else if (elementX.value > 300) {
          // å³ä¾§æœ€å¤§è·ç¦»
          left.value = 200
        } else {
          // æœ‰æ•ˆå¯ç§»åŠ¨è·ç¦»ä¸‹çš„æ¢ç®—å…³ç³»
          left.value = elementX.value - 100
        }

        // çºµå‘ç§»åŠ¨
        if (elementY.value < 100) {
          top.value = 0
        } else if (elementY.value > 300) {
          top.value = 200
        } else {
          top.value = elementY.value - 100
        }
    })

    return { currIndex, target, top, left }
  }
```



### 4. æ§åˆ¶å¤§å›¾èƒŒæ™¯ç§»åŠ¨

> æ€è·¯ï¼šå¤§å›¾å’Œå°å›¾æ¯”ä¾‹ä¸º2:1  æ‰€ä»¥è®¡ç®—å…¬å¼åº”è¯¥ä¸ºå°å›¾çš„å®šä½è·ç¦»ä¹˜ä»¥2

```js
setup () {
    // elementX é¼ æ ‡åŸºäºå®¹å™¨å·¦ä¸Šè§’Xè½´åç§»
    // elementY é¼ æ ‡åŸºäºå®¹å™¨å·¦ä¸Šè§’Yè½´åç§»
    // isOutside é¼ æ ‡æ˜¯å¦åœ¨æ¨¡æ¿å®¹å™¨å¤–
    const { elementX, elementY, isOutside } = useMouseInElement(target)
    const bgPosition = reactive({ backgroundPositionX: 0, backgroundPositionY: 0 })
    watch([elementX, elementY, isOutside], () => {
      // è®¾ç½®å¤§å›¾èƒŒæ™¯ç§»åŠ¨
      bgPosition.backgroundPositionX = -left.value * 2 + 'px'
      bgPosition.backgroundPositionY = -top.value * 2 + 'px'
    })
    return { bgPosition }
}
```

### 5. æ§åˆ¶è’™å±‚å’Œå¤§å›¾æ˜¾éš

> æ€è·¯ï¼šåªæœ‰é¼ æ ‡åœ¨æ¨¡æ¿å®¹å™¨å†…æ—¶æ‰æ˜¾ç¤ºè’™å±‚å’Œå¤§å›¾ï¼Œå¦åˆ™ä¸æ˜¾ç¤º
>
> æ ¸å¿ƒé€»è¾‘ï¼šé€šè¿‡åˆ¤æ–­`isOutside` çš„å€¼æ¥åˆ¤æ–­

```jsx
<div
  class="large"
  v-show="isShow"
  :style="[{ backgroundImage: `url(${images[currIndex]})`},bgPosition]"
></div>
<div class="middle" ref="target">
  <img :src="images[currIndex]" alt="" />
  <div class="layer" :style="position" v-show="isShow"></div>
</div> 

setup () {
    const isShow = ref(false)
    // elementX é¼ æ ‡åŸºäºå®¹å™¨å·¦ä¸Šè§’Xè½´åç§»
    // elementY é¼ æ ‡åŸºäºå®¹å™¨å·¦ä¸Šè§’Yè½´åç§»
    // isOutside é¼ æ ‡æ˜¯å¦åœ¨æ¨¡æ¿å®¹å™¨å¤–
    const { elementX, elementY, isOutside } = useMouseInElement(target)
    watch([elementX, elementY, isOutside], () => {
      isShow.value = !isOutside.value
    })
    return {  isShow }
 }
```

## åŸºç¡€ä¿¡æ¯å±•ç¤º

`æœ¬èŠ‚ç›®æ ‡:`  å®ç°ä¸¤å—åŸºç¡€å†…å®¹çš„ä¿¡æ¯å±•ç¤º

![](assets/detail/09.png)

**å®ç°æ­¥éª¤**

1. å®šä¹‰å·¦ä¾§å†…å®¹ç»„ä»¶
2. å®šä¹‰å³ä¾§å†…å®¹ç»„ä»¶
3. åœ¨è¯¦æƒ…ç»„ä»¶ä¸­ä½¿ç”¨è¿™ä¿©ä¸ªç»„ä»¶
4. ä½¿ç”¨çœŸå®æ•°æ®æ¸²æŸ“å³ä¾§åŒºåŸŸå†…å®¹

**ä»£ç è½åœ°**

1ï¼‰å®šä¹‰å·¦ä¾§åŒºåŸŸç»„ä»¶

 `src/views/goods/components/goods-sales.vue`

```vue
<template>
  <ul class="goods-sales">
    <li>
      <p>é”€é‡äººæ°”</p>
      <p>200+</p>
      <p><i class="iconfont icon-task-filling"></i>é”€é‡äººæ°”</p>
    </li>
    <li>
      <p>å•†å“è¯„ä»·</p>
      <p>400+</p>
      <p><i class="iconfont icon-comment-filling"></i>æŸ¥çœ‹è¯„ä»·</p>
    </li>
    <li>
      <p>æ”¶è—äººæ°”</p>
      <p>600+</p>
      <p><i class="iconfont icon-favorite-filling"></i>æ”¶è—å•†å“</p>
    </li>
    <li>
      <p>å“ç‰Œä¿¡æ¯</p>
      <p>è‹å®ç”µå™¨</p>
      <p><i class="iconfont icon-dynamic-filling"></i>å“ç‰Œä¸»é¡µ</p>
    </li>
  </ul>
</template>

<script>
export default {
  name: 'GoodsSales'
}
</script>

<style scoped lang='less'>
.goods-sales {
  display: flex;
  width: 400px;
  align-items: center;
  text-align: center;
  height: 140px;
  li {
    flex: 1;
    position: relative;
    ~ li::after {
      position: absolute;
      top: 10px;
      left: 0;
      height: 60px;
      border-left: 1px solid #e4e4e4;
      content: "";
    }
    p {
      &:first-child {
        color: #999;
      }
      &:nth-child(2) {
        color: @priceColor;
        margin-top: 10px;
      }
      &:last-child {
        color: #666;
        margin-top: 10px;
        i {
          color: @xtxColor;
          font-size: 14px;
          margin-right: 2px;
        }
        &:hover {
          color: @xtxColor;
          cursor: pointer;
        }
      }
    }
  }
}
</style>
```

2ï¼‰å®šä¹‰å³ä¾§åŒºåŸŸç»„ä»¶

 `src/views/goods/components/goods-name.vue`

```vue
<template>
  <p class="g-name">2ä»¶è£… ç²‰é‡‰èŠ±ç“£å¿ƒæ„ç‚¹ç¼€ ç‚¹å¿ƒç›˜*2 ç¢Ÿå­ç›˜å­</p>
  <p class="g-desc">èŠ±ç“£é€ å‹å¹²å‡€ç®€çº¦ å¤šåŠŸèƒ½ä½¿ç”¨å †å æ–¹ä¾¿</p>
  <p class="g-price">
    <span>108.00</span>
    <span>199.00</span>
  </p>
  <div class="g-service">
    <dl>
      <dt>ä¿ƒé”€</dt>
      <dd>12æœˆå¥½ç‰©æ”¾é€ï¼ŒAppé¢†åˆ¸è´­ä¹°ç›´é™120å…ƒ</dd>
    </dl>
    <dl>
      <dt>é…é€</dt>
      <dd>è‡³ </dd>
    </dl>
    <dl>
      <dt>æœåŠ¡</dt>
      <dd>
        <span>æ— å¿§é€€è´§</span>
        <span>å¿«é€Ÿé€€æ¬¾</span>
        <span>å…è´¹åŒ…é‚®</span>
        <a href="javascript:;">äº†è§£è¯¦æƒ…</a>
      </dd>
    </dl>
  </div>
</template>

<script>
export default {
  name: 'GoodName'
}
</script>

<style lang="less" scoped>
.g-name {
  font-size: 22px
}
.g-desc {
  color: #999;
  margin-top: 10px;
}
.g-price {
  margin-top: 10px;
  span {
    &::before {
      content: "Â¥";
      font-size: 14px;
    }
    &:first-child {
      color: @priceColor;
      margin-right: 10px;
      font-size: 22px;
    }
    &:last-child {
      color: #999;
      text-decoration: line-through;
      font-size: 16px;
    }
  }
}
.g-service {
  background: #f5f5f5;
  width: 500px;
  padding: 20px 10px 0 10px;
  margin-top: 10px;
  dl {
    padding-bottom: 20px;
    display: flex;
    align-items: center;
    dt {
      width: 50px;
      color: #999;
    }
    dd {
      color: #666;
      &:last-child {
        span {
          margin-right: 10px;
          &::before {
            content: "â€¢";
            color: @xtxColor;
            margin-right: 2px;
          }
        }
        a {
          color: @xtxColor;
        }
      }
    }
  }
}
</style>
```

3ï¼‰è¯¦æƒ…ç»„ä»¶é‡Œä½¿ç”¨ç»„ä»¶ 

 `src/views/goods/index.vue`

```html
<template>
    <!-- å•†å“ä¿¡æ¯ -->
    <div class="goods-info">
        <div class="media">
          <GoodsImage :imageList="goods.mainPictures" />
          <!-- é”€é‡ç»„ä»¶ -->
          <GoodsSales />
        </div>
        <div class="spec">
          <!-- ä¿¡æ¯ç»„ä»¶ -->
          <GoodsName/>
        </div>
    </div>
</template>

<script>
  import GoodsSales from './components/goods-sales'
  import GoodsName from './components/goods-name'
  export default {
      components: { GoodsImage, GoodsSales, GoodsName }
  }
</script>  
```

4ï¼‰æ¸²æŸ“å³ä¾§åŒºå—æ•°æ®

`src/views/goods/index.vue`

```html
<div class="goods-info">
<div class="media">
  <GoodsImage :imageList="goods.mainPictures" />
  <!-- é”€é‡ç»„ä»¶ -->
  <GoodsSale :goods="goods"/>
</div>
<div class="spec">
  <!-- ä¿¡æ¯ç»„ä»¶ -->
  <GoodsName :goods="goods"/>
</div>
</div>
```

`src/views/goods/components/goods-name.vue`

```html
<p class="g-name">{{ goods.name }}</p>
<p class="g-desc">{{ goods.desc }}</p>
<p class="g-price">
<span>{{ goods.price }}</span>
<span>{{ goods.oldPrice }}</span>
</p>

<script>
export default {
  name: 'GoodName',
  props: {
    goods: {
      type: Object,
      default () {
        return {}
      }
    }
  }
}
</script>
```

``src/views/goods/components/goods-sale.vue`

```html
<template>
  <ul class="goods-sales">
    <li>
      <p>é”€é‡äººæ°”</p>
      <p>{{goods.salesCount}}</p>
      <p><i class="iconfont icon-task-filling"></i>é”€é‡äººæ°”</p>
    </li>
    <li>
      <p>å•†å“è¯„ä»·</p>
      <p>{{goods.commentCount}}</p>
      <p><i class="iconfont icon-comment-filling"></i>æŸ¥çœ‹è¯„ä»·</p>
    </li>
    <li>
      <p>æ”¶è—äººæ°”</p>
      <p>{{goods.collectCount}}</p>
      <p><i class="iconfont icon-favorite-filling"></i>æ”¶è—å•†å“</p>
    </li>
    <li>
      <p>å“ç‰Œä¿¡æ¯</p>
      <p>{{goods.brand.name}}</p>
      <p><i class="iconfont icon-dynamic-filling"></i>å“ç‰Œä¸»é¡µ</p>
    </li>
  </ul>
</template>
<script>
export default {
  name: 'GoodName',
  props: {
    goods: {
      type: Object,
      default () {
        return {}
      }
    }
  }
}
</script>
```





## åŸå¸‚ç»„ä»¶å®ç°ï¼ˆéš¾ç‚¹ï¼‰

![](assets/detail/10.png)

### 1. åŸºç¡€å¸ƒå±€äº¤äº’å®ç°

`æœ¬èŠ‚ç›®æ ‡:`  å®ç°åŸå¸‚ç»„ä»¶çš„åŸºç¡€å¸ƒå±€å’Œæ‰“å¼€å…³é—­äº¤äº’

> å…ˆä¸åˆ‡æ¢å„ç§åŸå¸‚åŒºåŸŸï¼Œå…ˆå®ç°åŸºç¡€å¸ƒå±€å’Œå¼¹æ¡†æ‰“å¼€å…³é—­äº¤äº’

`src/components/City.vue`

- ç»“æ„

```vue
<template>
  <div class="xtx-city">
    <div class="select" @click="toggleDialog" :class="{active}">
      <span class="placeholder">è¯·é€‰æ‹©é…é€åœ°å€</span>
      <span class="value"></span>
      <i class="iconfont icon-angle-down"></i>
    </div>
    <div class="option" v-if="active">
      <span class="ellipsis" v-for="i in 24" :key="i">åŒ—äº¬å¸‚</span>
    </div>
  </div>
</template>
```

- é€»è¾‘

```html
<script>
import { ref } from 'vue'
export default {
  name: 'XtxCity',
  setup () {
     // æ§åˆ¶å±•å¼€æ”¶èµ·,é»˜è®¤æ”¶èµ·
    const active = ref(false)
    // æ‰“å¼€å¼¹æ¡†
    function open () {
      active.value = true
    }
    // å…³é—­å¼¹æ¡†
    function close () {
      active.value = false
    }
    // åˆ‡æ¢å±•å¼€æ”¶èµ·
    function toggleDialog () {
      if (active.value) {
        close()
      } else {
        open()
      }
    }
    return { active, toggleDialog }
  }
}
</script>
```

- æ ·å¼

```html
<style scoped lang="less">
.xtx-city {
  display: inline-block;
  position: relative;
  z-index: 400; 
  margin-left: 10px;
  .select {
    border: 1px solid #e4e4e4;
    height: 30px;
    padding: 0 5px;
    line-height: 28px;
    cursor: pointer;
    &.active {
      background: #fff;
    }
    .placeholder {
      color: #999;
    }
    .value {
      color: #666;
      font-size: 12px;
    }
    i {
      font-size: 12px;
      margin-left: 5px;
    }
  }
  .option {
    width: 542px;
    border: 1px solid #e4e4e4;
    position: absolute;
    left: 0;
    top: 29px;
    background: #fff;
    min-height: 30px;
    line-height: 30px;
    display: flex;
    flex-wrap: wrap;
    padding: 10px;
    > span {
      width: 130px;
      text-align: center;
      cursor: pointer;
      border-radius: 4px;
      padding: 0 3px;
      &:hover {
        background: #f5f5f5;
      }
    }
  }
}
</style>
```

- ä½¿ç”¨åŸå¸‚ç»„ä»¶

```html
<dl>
  <dt>é…é€</dt>
  <dd>è‡³</dd>
  <dd>
    <xtx-city/>
  </dd>
</dl>
```

### 2. è·å–æ•°æ®æ¸²æŸ“

`æœ¬èŠ‚ç›®æ ‡:`  å®ç°åŸå¸‚æ•°æ®çš„è·å–

> åŸå¸‚æ•°æ®çš„æ¥å£æ˜¯ä¸€ä¸ªå¯¹ç«‹çš„æ¥å£ï¼Œä¸èµ°æˆ‘ä»¬request.jsä¸­çš„é€»è¾‘ï¼Œæˆ‘ä»¬å•ç‹¬æ¥ä½¿ç”¨axiosæ¥è¿›è¡Œæ•°æ®è·å–

```html
<template>
  <div class="xtx-city" ref="target">
    <div class="option" v-if="active">
      <span class="ellipsis" v-for="item in dataList" :key="item.code">{{item.name}}</span>
    </div>
  </div>
</template>

<script>
import axios from 'axios'
import { onMounted, ref } from 'vue'
export default {
  name: 'XtxCity',
  setup () {
    const dataList = ref([])
    function getCityData () {
      // å…¼å®¹æœ‰ç¼“å­˜çš„æ“ä½œ å°è£…æˆä¸€ä¸ªpromise
      return new Promise((resolve, reject) => {
        if (window.cityData) {
          // æœ‰ç¼“å­˜ç›´æ¥æŠŠç¼“å­˜æ•°æ®è¿”å›
          resolve(window.cityData)
        } else {
          // æ— ç¼“å­˜ è¯·æ±‚æ•°æ®è¿”å›
          const url = 'https://yjy-oss-files.oss-cn-zhangjiakou.aliyuncs.com/tuxian/area.json'
          axios.get(url).then(res => {
            // åŠ å…¥ç¼“å­˜
            window.cityData = res.data
            resolve(window.cityData)
          })
        }
      })
    }
    onMounted(() => {
      getCityData().then(res => {
        dataList.value = res
      })
    })
    return { active, toggleDialog, dataList }
  }
}
</script>
```

![](assets/detail/11.png)

### 3. äº¤äº’å®ç°ï¼ˆå¤æ‚ï¼‰

`æœ¬èŠ‚ç›®æ ‡:`  å®ç°åŸå¸‚ç»„ä»¶çš„äº¤äº’é€»è¾‘

 **å®ç°æ­¥éª¤**

 1. ç‚¹å‡»çœä»½ï¼ˆåŸå¸‚ï¼‰æŠŠå½“å‰çœä»½æ•°æ®è®°å½•ä¸‹æ¥ï¼Œå¹¶æŠŠæ¸²æŸ“åˆ—è¡¨å˜æˆå½“å‰çœä»½ä¸‹çš„å¸‚
 2. ç‚¹å‡»åŸå¸‚æŠŠå½“å‰åŸå¸‚ä¿¡æ¯è®°å½•ä¸‹æ¥ï¼Œå¹¶æŠŠæ¸²æŸ“åˆ—è¡¨å˜æˆå½“å‰åŸå¸‚ä¸‹çš„åŒºåŸŸ
 3. ç‚¹å‡»åŒºåŸŸæŠŠå½“å‰åŒºåŸŸä¿¡æ¯è®°å½•ä¸‹æ¥ï¼Œå¹¶å…³é—­å¼¹æ¡†
 4. æ¯æ¬¡é‡æ–°ç‚¹å‡»åŸå¸‚æ¡†ï¼Œæ¸…ç©ºå·²ç»è®°å½•çš„æ‰€æœ‰æ•°æ®

**ä»£ç è½åœ°**

```js
const changeResult = reactive({
  provinceCode: '', // çœcode
  provinceName: '', // çœåç§°
  cityCode: '', // åŸå¸‚code
  cityName: '', // åŸå¸‚åç§°
  countyCode: '', // åœ°åŒºcode
  countyName: '' // åœ°åŒºåç§°
})

// é‡ç½®æ•°æ®
watch(() => { return active.value }, (newVal) => {
  if (newVal === true) {
    changeResult.provinceCode = ''
    changeResult.provinceName = ''
    changeResult.cityCode = ''
    changeResult.cityName = ''
    changeResult.countyCode = ''
    changeResult.countyName = ''
    console.log(changeResult)
  }
})


function changeItem (item) {
  // è®°å½•çœä»½æ•°æ®
  if (item.level === 0) {
    changeResult.provinceCode = item.code
    changeResult.provinceName = item.name
  }
  // è®°å½•åŸå¸‚æ•°æ®
  if (item.level === 1) {
    changeResult.cityCode = item.code
    changeResult.cityName = item.name
  }
  // è®°å½•åœ°åŒºæ•°æ®
  if (item.level === 2) {
    changeResult.countyCode = item.code
    changeResult.countyName = item.name
    close()
  }
}

// å®šä¹‰è®¡ç®—å±æ€§
// æ ¸å¿ƒé€»è¾‘: 
// 1. é»˜è®¤æƒ…å†µä¸‹provinceCodeå’ŒcityCodeéƒ½æ²¡æœ‰,æ‰€ä»¥ç›´æ¥è¿”å›list,æ¸²æŸ“æ‰€æœ‰çœä»½
// 2. å½“provinceCodeæœ‰æ•°æ®ä¹‹å,listå˜æˆäº†å½“å‰çœä»½å¯¹åº”çš„æ‰€æœ‰åŸå¸‚æ•°æ®
// 3. å½“cityCodeæœ‰æ•°æ®ä¹‹å,listå˜æˆäº†å½“å‰åŸå¸‚ä¸‹æ‰€æœ‰çš„åœ°åŒº
const currList = computed(() => {
  // çœä»½
  let list = dataList.value
  // åŸå¸‚
  if (changeResult.provinceCode) {
    list = currList.find(p => p.code === changeResult.provinceCode).areaList
  }
  // åœ°åŒº
  if (changeResult.cityCode) {
    list = currList.find(c => c.code === changeResult.cityCode).areaList
  }
  return list
})
```

## å•†å“è§„æ ¼åŠŸèƒ½å®ç°

![](assets/detail/12.png)

### 1. ç†è§£åŸºç¡€skuæ¦‚å¿µ

spu å’Œ sku éƒ½æ˜¯å±æ€§å€¼çš„é›†åˆï¼Œä¸¾ä¸ªæ —å­ >>

ä¸€éƒ¨ iphone6Sï¼Œå®ƒèº«ä¸Šæœ‰å¾ˆå¤šçš„å±æ€§å’Œå€¼. æ¯”å¦‚ :

- æ¯›é‡ï¼š420.00 g
- äº§åœ°ï¼šä¸­å›½å¤§é™†
- å®¹é‡ï¼š16Gï¼Œ64Gï¼Œ 128G
- é¢œè‰²ï¼š é“¶ï¼Œç™½ï¼Œ ç«ç‘°é‡‘

spu å±æ€§ï¼ˆä¸ä¼šå½±å“åˆ°åº“å­˜å’Œä»·æ ¼çš„å±æ€§, åˆå«**å…³é”®å±æ€§**ï¼‰

- æ¯›é‡ï¼š 420.00 g
- äº§åœ°ï¼šä¸­å›½å¤§é™†


sku å±æ€§ï¼ˆä¼šå½±å“åˆ°åº“å­˜å’Œä»·æ ¼çš„å±æ€§, åˆå«**é”€å”®å±æ€§**ï¼‰

- å®¹é‡ï¼š16Gï¼Œ64Gï¼Œ 128G
- é¢œè‰²ï¼š é“¶ï¼Œç™½ï¼Œ ç«ç‘°é‡‘



### 2. skuç»„ä»¶è®¤è¯†

**props**

| å±æ€§å | è¯´æ˜                                    | é»˜è®¤å€¼                  | ä½œç”¨                     |
| ------ | --------------------------------------- | ----------------------- | ------------------------ |
| goods  | å•†å“ä¿¡æ¯å¯¹è±¡å¿…é¡»åŒ…å«specsæ•°ç»„å’Œskusæ•°ç»„ | { specs: []ï¼Œskus: [] } | ä¸ºæ¸²æŸ“å’Œäº¤äº’æä¾›æ•°æ®æ”¯æŒ |
| skuId  | skuå”¯ä¸€æ ‡è¯†id                           | ç©ºå­—ç¬¦ä¸²                | å›æ˜¾é»˜è®¤è§„æ ¼æ•°æ®æ—¶ä½¿ç”¨   |

**äº‹ä»¶**

| åç§°   | è¯´æ˜                                                         |
| ------ | ------------------------------------------------------------ |
| change | äº§å‡ºå½“å‰é€‰æ‹©çš„å•†å“è§„æ ¼ä¿¡æ¯ï¼Œå¦‚æœæ˜¯å®Œæ•´çš„skuï¼Œäº§å‡ºå®Œæ•´çš„å¯¹è±¡ä¿¡æ¯ï¼Œå¦‚æœä¸å®Œæ•´ï¼Œåˆ™äº§å‡ºç©ºå¯¹è±¡ |

### 3. ä¸šåŠ¡ä½¿ç”¨

> ä¼ å…¥å•†å“ä¿¡æ¯æ•°æ®ï¼Œå¹¶ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶changeï¼Œæµ‹è¯•ç»„ä»¶æ˜¯å¦è¿è¡Œæ­£å¸¸

```html
<!-- å•†å“ä¿¡æ¯åŒº -->
<div class="spec">
  <goods-sku
    :goods="goods"
    @change="skuChange"
  ></goods-sku>
</div>

<script>
  export default {
     setup(){
        function skuChange(sku){
            console.log(sku)
        }
     }
  }
</script>
```

ç‰¹åˆ«æ³¨æ„ï¼šå¯¹è±¡çš„å…·ä½“å±æ€§æ•°æ®ä¾èµ–äºå¼‚æ­¥çš„è¿”å›ï¼Œå½“æ•°æ®æ²¡æœ‰è¿”å›å€¼éå¸¸å®¹æ˜“å‡ºç° `undefined.å±æ€§`

```html
<div class="xtx-goods-page" v-if="goods.specs"></div>
```

## æ•°é‡ç»„ä»¶å®ç°

`æœ¬èŠ‚ç›®æ ‡:`  å®ç°å•†å“çš„æ•°é‡æ“ä½œç»„ä»¶çš„å°è£…

![](assets/detail/14.png)

**å®ç°æ­¥éª¤**

1. æ­å»ºç»„ä»¶é™æ€ç»“æ„å¹¶å®ç°å¢å‡é€»è¾‘
2. é€šè¿‡propsä¼ å…¥æ§åˆ¶æœ€å¤§å’Œæœ€å°å€¼
3. å®ç°ç»„ä»¶çš„v-modelåŒå‘ç»‘å®š

**ä»£ç è½åœ°**

1ï¼‰åŸºç¡€å¸ƒå±€ä»£ç 

`src/components/Numbox.vue`

```html
<template>
  <div class="xtx-numbox">
    <div class="label">æ•°é‡</div>
    <div class="numbox">
      <a href="javascript:;">-</a>
      <input type="text" readonly value="1">
      <a href="javascript:;">+</a>
    </div>
  </div>
</template>
<script>
export default {
  name: 'XtxNumbox'
}
</script>
<style scoped lang="less">
.xtx-numbox {
  display: flex;
  align-items: center;
  .label {
    width: 60px;
    color: #999;
    padding-left: 10px;
  }
  .numbox {
    width: 120px;
    height: 30px;
    border: 1px solid #e4e4e4;
    display: flex;
    > a {
      width: 29px;
      line-height: 28px;
      text-align: center;
      background: #f8f8f8;
      font-size: 16px;
      color: #666;
      &:first-of-type {
        border-right:1px solid #e4e4e4;
      }
      &:last-of-type {
        border-left:1px solid #e4e4e4;
      }
    }
    > input {
      width: 60px;
      padding: 0 5px;
      text-align: center;
      color: #666;
    }
  }
}
</style>
```

2ï¼‰æ•°é‡å¢å‡é€»è¾‘å®ç°

```jsx
<a href="javascript:;" @click="decrease">-</a>
<input type="text" readonly :value="curNum" />
<a href="javascript:;" @click="add">+</a>

setup(){
    const curNum = ref(1)
    function add () {
      curNum.value++
    }
    function decrease () {
      curNum.value--
    }  
    return { add, decrease }
}
```

3ï¼‰æ§åˆ¶æœ€å¤§æœ€å°æ•°é‡

```jsx
props: {
    min: {
      type: Number,
      default: 1
    },
    max: {
      type: Number,
      default: 10
    }
},
setup(){
    const curNum = ref(1)
    function add () {
      if (curNum.value === props.max) return false
      curNum.value++
    }

    function decrease () {
      if (curNum.value === props.min)  return false
      curNum.value--
    }
}
```

4ï¼‰å®ç°v-modelåŒå‘ç»‘å®š

**å‰ç½®çŸ¥è¯†ç‚¹**

> vue2.x  ç»„ä»¶èº«ä¸Šå†™äº†v-model = "name"
>
> 1. åœ¨ç»„ä»¶èº«ä¸Šå®šä¹‰äº†ä¸€ä¸ªå±æ€§åä¸º`value`  prop
> 2. ç»‘å®šä¸€ä¸ªé»˜è®¤çš„è‡ªå®šä¹‰äº‹ä»¶  `input` äº‹ä»¶
> 3. åœ¨è‡ªå®šä¹‰äº‹ä»¶ç»‘å®šçš„å‡½æ•°ä¸­ å®Œæˆäº†å¯¹äºnameå±æ€§çš„èµ‹å€¼
>
> 
>
> vue3.0ä¸­çš„v-modelè¯­æ³•æœ‰æ‰€å˜åŒ–ï¼Œå¦‚æœæˆ‘ä»¬ç»™ä¸€ä¸ªç»„ä»¶ä¹¦å†™äº†v-modelä¹‹åï¼Œç›¸å½“äºå®Œæˆäº†ä¿©ä»¶äº‹æƒ…
>
> 1. ç»™å­ç»„ä»¶ä¼ é€’äº†ä¸€ä¸ªåç§°ä¸º`modelValue` çš„prop
> 2. ç»™å­ç»„ä»¶ç»‘å®šäº†ä¸€ä¸ªåç§°ä¸º`update:modelValue` çš„è‡ªå®šä¹‰äº‹ä»¶

**å®ç°æ­¥éª¤**

1. æ¯æ¬¡ä¿®æ”¹numberä¹‹åï¼Œé€šè¿‡è°ƒç”¨`emit`æ–¹æ³•è§¦å‘è‡ªå®šä¹‰äº‹ä»¶æŠŠå€¼åŒæ­¥ç»™çˆ¶ç»„ä»¶ ï¼ˆå­ =ã€‹çˆ¶ï¼‰
2. é€šè¿‡watchç›‘å¬ä¼ å…¥çš„`modelValue`çš„å˜åŒ– ï¼ŒæŠŠmodelValueæœ€æ–°çš„å€¼èµ‹å€¼ç»™number ï¼ˆ çˆ¶=ã€‹å­ï¼‰

**ä»£ç è½åœ°**

```jsx
<script>
import { ref, watch } from 'vue'
export default {
  name: 'XtxNumbox',
  props: {
    modelValue: {
      type: Number,
      default: 1
    },
    min: {
      type: Number,
      default: 1
    },
    max: {
      type: Number,
      default: 10
    }
  },
  setup (props, { emit }) {
    const curNum = ref(1)
    function add () {
      if (curNum.value === props.max) return false
      curNum.value++
      emit('update:modelValue', curNum.value)
    }

    function decrease () {
      if (curNum.value === props.min) {
        return false
      }
      curNum.value--
      emit('update:modelValue', curNum.value)
    }
    // ç›‘å¬propsä¼ å…¥å€¼çš„å˜åŒ–,ä¸€æ—¦å‘ç”Ÿå˜åŒ–å°±èµ‹å€¼ç»™curNum
    watch(() => props.modelValue, () => {
      curNum.value = props.modelValue
    }, { immediate: true })
    return { curNum, add, decrease }
  }
}
</script>
```

## æŒ‰é’®ç»„ä»¶å°è£…

`æœ¬èŠ‚ç›®æ ‡:`  å®ç°æŒ‰é’®ç»„ä»¶çš„å°è£…ï¼Œæ”¯æŒå¤§å°/ç±»å‹/æ–‡æ¡ˆçš„è‡ªå®šä¹‰

![](assets/detail/btn.png)

**å®ç°æ­¥éª¤**

1. æŠŠå¤§å°å’Œç±»å‹çš„æ ·å¼æ§åˆ¶è®¾è®¡ä¸ºpropsï¼Œé€šè¿‡ä¸åŒä¼ å…¥åŒ¹é…ä¸ä¸€æ ·çš„æ ·å¼
2. æŠŠæ–‡æ¡ˆçš„è‡ªå®šä¹‰è®¾è®¡ä¸ºæ’æ§½ï¼Œæ”¯æŒè‡ªå®šä¹‰æŒ‰é’®æ–‡æ¡ˆå±•ç¤º

**ä»£ç è½åœ°**

1ï¼‰å®šä¹‰ç»„ä»¶å¹¶å…¨å±€æ³¨å†Œ

`src/components/Button.vue`

```html
<template>
  <button class="xtx-button ellipsis" :class="[size, type]">
    <slot />
  </button>
</template>
<script>
export default {
  name: 'XtxButton',
  props: {
    size: {
      type: String,
      default: 'middle'
    },
    type: {
      type: String,
      default: 'default'
    }
  }
}
</script>
<style scoped lang="less">
.xtx-button {
  appearance: none;
  border: none;
  outline: none;
  background: #fff;
  text-align: center;
  border: 1px solid transparent;
  border-radius: 4px;
  cursor: pointer;
}
// å¤§
.large {
  width: 240px;
  height: 50px;
  font-size: 16px;
}
// ä¸­
.middle {
  width: 180px;
  height: 50px;
  font-size: 16px;
}
// å°
.small {
  width: 100px;
  height: 32px;
}
//è¶…å°
.mini {
  width: 60px;
  height: 32px;
}
.default {
  border-color: #e4e4e4;
  color: #666;
}
// ç¡®è®¤
.primary {
  border-color: @xtxColor;
  background: @xtxColor;
  color: #fff;
}
// æ™®é€š
.plain {
  border-color: @xtxColor;
  color: @xtxColor;
  background: lighten(@xtxColor, 50%);
}
// ç°è‰²
.gray {
  border-color: #ccc;
  background: #ccc;
  color: #fff;
}
</style>
```

2ï¼‰ä½¿ç”¨ç»„ä»¶

`src/views/goods/index.vue`

```html
<div class="spec">
  ...
  <XtxButton type="primary" style="margin-top:20px;">åŠ å…¥è´­ç‰©è½¦</XtxButton>
</div>
```

åˆ°æ­¤ï¼Œæˆ‘ä»¬çš„å•†å“ä¸»è¦ä¿¡æ¯å±•ç¤ºåŒºåŸŸå°±éƒ½å®Œæˆå’¯ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹å®Œæˆè¯¦æƒ…åŒºåŸŸå’Œçƒ­æ¦œåŒºåŸŸ

# å•†å“è¯¦æƒ…åŒºåŸŸ

![](assets/detail/15.png)

## æ ‡ç­¾é¡µç»„ä»¶å®ç°

`æœ¬èŠ‚ç›®æ ‡:`  å®ç°æ ‡ç­¾é¡µç»„ä»¶çš„å°è£…

![](assets/detail/17.png)

**å®ç°æ­¥éª¤**

1. å®ŒæˆåŸºç¡€çš„tabçš„å¯¼èˆªå¸ƒå±€
2. å®Œæˆtabæ ‡ç­¾é¡µçš„åˆ‡æ¢æ ·å¼æ•ˆæœ
3. å®Œæˆè¯¦æƒ…å’Œè¯„è®ºç»„ä»¶çš„åˆ‡æ¢ `component`

### 1. å®šä¹‰ç»„ä»¶åŸºç¡€ç»“æ„

1ï¼‰å®šä¹‰tabsç»„ä»¶ `src/vies/goods/components/goods-tabs.vue`

```html
<template>
  <div class="goods-tabs">
    <nav>
      <a href="javascript:;">å•†å“è¯¦æƒ…</a>
      <a href="javascript:;">å•†å“è¯„ä»·<span></span></a>
    </nav>
    <!-- è¿™ä¸ªä½ç½®æ˜¾ç¤ºå¯¹åº”çš„ç»„ä»¶ GoodsDetail æˆ–è€… GoodsComment -->
  </div>
</template>
<script>
export default {
  name: 'GoodsTabs'
}
</script>
<style scoped lang="less">
.goods-tabs {
  min-height: 600px;
  background: #fff;
  nav {
    height: 70px;
    line-height: 70px;
    display: flex;
    border-bottom: 1px solid #f5f5f5;
    a {
      padding: 0 40px;
      font-size: 18px;
      position: relative;
      > span {
        color: @priceColor;
        font-size: 16px;
        margin-left: 10px;
      }
      &:first-child {
        border-right: 1px solid #f5f5f5;
      }
      &.active {
        &::before {
          content: "";
          position: absolute;
          left: 40px;
          bottom: -1px;
          width: 72px;
          height: 2px;
          background: @xtxColor;
        }
      }
    }
  }
}
</style>
```

2ï¼‰ä½¿ç”¨tabsç»„ä»¶

`src/views/goods/index.vue`

```jsx
// å¯¼å…¥
import GoodsTabs from './components/goods-tabs'
// æ³¨å†Œ
components: { GoodsTabs }
// æ¨¡æ¿ä½¿ç”¨
<div class="goods-article">
  <!-- å•†å“+è¯„ä»· -->
  <GoodsTabs/>
  <!-- æ³¨æ„äº‹é¡¹ -->
  <div class="goods-warn"></div>
</div>
```

### 2. å®ç°tabæ¿€æ´»æ ·å¼åˆ‡æ¢

> å®ç°æ€è·¯ï¼š
>
> 1. ç¡®å®šä¸€ä¸ªæ ‡è¯†`activeName`ï¼Œå€¼ä¸ºdetailæ—¶è¡¨ç¤ºæ¿€æ´»è¯¦æƒ…ï¼Œå€¼ä¸ºcommentæ—¶è¡¨ç¤ºæ¿€æ´»è¯„è®º
> 2. é€šè¿‡æ§åˆ¶activeç±»åçš„æ˜¾ç¤ºæ¥æ§åˆ¶æ ·å¼çš„åˆ‡æ¢

```html
<template>
  <div class="goods-tabs">
    <nav>
      <a
        :class="{ active: activeName === 'detail' }"
        href="javascript:;"
        @click="clickTab('detail')"
        >å•†å“è¯¦æƒ…</a
      >
      <a
        :class="{ active: activeName === 'comment' }"
        href="javascript:;"
        @click="clickTab('comment')"
        >å•†å“è¯„ä»·<span>(500+)</span></a
      >
    </nav>
  </div>
</template>
<script>
import { ref } from 'vue'
export default {
  name: 'GoodsTabs',
  setup () {
    // detail-->è¯¦æƒ…   comment-->è¯„ä»·
    const activeName = ref('detail')
    const clickTab = (name) => {
      activeName.value = name
    }
    return { activeName, clickTab }
  }
}
</script>
```

### 3. åˆ‡æ¢è¯¦æƒ…ç»„ä»¶å’Œè¯„è®ºç»„ä»¶

> å®ç°æ€è·¯ï¼š
>
> 1. å®šä¹‰ä¿©ä¸ªç»„ä»¶ï¼Œè¯¦æƒ…ç»„ä»¶å’Œè¯„è®ºç»„ä»¶
> 2. é€šè¿‡å†…ç½®ç»„ä»¶`component`  çš„iså±æ€§çš„åˆ‡æ¢æ¥æ¸²æŸ“ä¸åŒç»„ä»¶

1ï¼‰æ–°å»ºè¯¦æƒ…å’Œè¯„è®ºç»„ä»¶

`src/vies/goods/components/goods-detail.vue`

```html
<template>
  <div class="goods-detail">è¯¦æƒ…</div>
</template>
<script>
export default {
  name: 'GoodsDetail'
}
</script>
<style scoped lang="less"></style>
```

`src/vies/goods/components/goods-comment.vue`

```html
<template>
  <div class="goods-comment">è¯„ä»·</div>
</template>
<script>
export default {
  name: 'GoodsComment'
}
</script>
<style scoped lang="less"></style>
```

2ï¼‰é€šè¿‡componentåˆ‡æ¢ç»„ä»¶æ¸²æŸ“

> <component :is="ç»„ä»¶å¼•ç”¨" />

```jsx
import GoodsDetail from './goods-detail'
import GoodsComment from './goods-comment'
// åˆ›å»ºæšä¸¾
const component = {
  detail: GoodsDetail,
  comment: GoodsComment
}
setup(){
   // æµ…ä»£ç† .valueå±æ€§æ˜¯ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ ä¸å†æ˜¯ä¸€ä¸ªProxyå¯¹è±¡
   const componentName = shallowRef(component)
   return {
      componentName 
   }
}

<component :is="componentName[activeType]"></component>
```

## è¯¦æƒ…ç»„ä»¶å®ç°

`æœ¬èŠ‚ç›®æ ‡:`  å®Œæˆè¯¦æƒ…ç»„ä»¶çš„æ•°æ®å±•ç¤º

![](assets/detail/18.png)

### 1. å®ç°è¯¦æƒ…ä¿¡æ¯å±•ç¤º

`Goods/components/goods-detail.vue`

```html
<template>
  <div class="goods-detail" v-if="goods.details">
    <!-- å±æ€§ -->
    <ul class="attrs">
      <li v-for="item in goods.details.properties" :key="item.value">
        <span class="dt">{{item.name}}</span>
        <span class="dd">{{item.value}}</span>
      </li>
    </ul>
    <!-- å›¾ç‰‡ -->
    <img v-for="item in goods.details.pictures" :key="item" :src="item" alt="">
  </div>
</template>

<script>
import { findGoods } from '@/api/goods'
import { ref, watch } from 'vue'
import { useRoute } from 'vue-router'
export default {
  name: 'GoodsDetail',
  setup () {
    const route = useRoute()
    const goods = ref({})
    async function getGoods () {
      const { result } = await findGoods(route.params.id)
      goods.value = result
    }
    return {
      goods
    }
  }
}
</script>
<style scoped lang="less">
.goods-detail {
  padding: 40px;
  .attrs {
    display: flex;
    flex-wrap: wrap;
    margin-bottom: 30px;
    li {
      display: flex;
      margin-bottom: 10px;
      width: 50%;
      .dt {
        width: 100px;
        color: #999;
      }
      .dd {
        flex: 1;
        color: #666;
      }
    }
  }
  > img {
    width: 100%;
  }
}
</style>
```

æ³¨æ„ï¼šåˆ«å¿˜äº†é€šè¿‡v-ifåšæ¸²æŸ“åˆ¤æ–­ï¼Œä¿è¯äºŒçº§å±æ€§æ˜¯OKçš„ï¼Œå¦åˆ™ä¼šæŠ¥å±æ€§æ‰¾ä¸åˆ°çš„é”™è¯¯

`<div class="goods-detail" v-if="goods.details">`

### 2. ç¼“å­˜è¯¦æƒ…ç»„ä»¶

> è¯¦æƒ…ç»„ä»¶å›¾ç‰‡è¾ƒå¤šï¼Œå¦‚æœåˆ‡æ¢çš„æ—¶å€™ä¸€ç›´é”€æ¯é‡å»ºç»„ä»¶ï¼Œå¼€é”€è¾ƒå¤§ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»™`component`ç»„ä»¶æ·»åŠ ç¼“å­˜åŠŸèƒ½æ¥ä¼˜åŒ–

```html
<!-- è¿™ä¸ªä½ç½®æ˜¾ç¤ºå¯¹åº”çš„ç»„ä»¶ GoodsDetail æˆ–è€… GoodsComment -->
<keep-alive>
  <component :is="`goods-${activeName}`" />
</keep-alive>
```



## CheckBoxç»„ä»¶å°è£…

![](assets/detail/checkbox.png)

**åŸºç¡€æ€è·¯**

1. å‡†å¤‡é™æ€ç»“æ„  é€‰ä¸­å›¾æ ‡éé€‰ä¸­å›¾æ ‡ + è‡ªå®šä¹‰çš„æ–‡å­—
2. å®šä¹‰ä¸€ä¸ªçŠ¶æ€è¡¨ç¤ºå½“å‰æ˜¯å¦é€‰ä¸­çš„çŠ¶æ€ ï¼ˆå¸ƒå°”å€¼ï¼‰
3. ä½¿ç”¨v-modelå®ç°é€‰ä¸­çŠ¶æ€çˆ¶å­çš„åŒæ­¥

**ä»£ç è½åœ°**

```html
<template>
  <div class="xtx-checkbox" @click="changeChecked()">
    <!-- é€‰ä¸­å°å›¾æ ‡ -->
    <i v-if="checked" class="iconfont icon-checked"></i>
    <!-- æœªé€‰ä¸­å°å›¾æ ‡ -->
    <i v-else class="iconfont icon-unchecked"></i>
    <!-- è‡ªå®šä¹‰æ–‡å­— -->
    <span><slot/></span>
  </div>
</template>
<script>
import { ref, watch } from 'vue'
export default {
  name: 'XtxCheckbox',
  props: {
    modelValue: {
      type: Boolean,
      default: false
    }
  },
  setup (props, { emit }) {
    const checked = ref(false)
    const changeChecked = () => {
      checked.value = !checked.value
      emit('update:modelValue', checked.value)
    }
    watch(
      () => {
        return props.modelValue
      },
      () => {
        checked.value = props.modelValue
      },
      {
        immediate: true
      }
    )
    return { checked, changeChecked }
  }
}
</script>
<style scoped lang="less">
.xtx-checkbox {
  display: inline-block;
  margin-right: 2px;
  .icon-checked {
    color: @xtxColor;
    ~ span {
      color: @xtxColor;
    }
  }
  i {
    position: relative;
    top: 1px;
  }
  span {
    margin-left: 2px;
  }
}
</style>
```



## è¯„è®ºç»„ä»¶å®ç°

### 1. å¤´éƒ¨å®ç°

`æœ¬èŠ‚ç›®æ ‡:`  å®Œæˆè¯„ä»·å¤´éƒ¨çš„æ•°æ®æ¸²æŸ“å’ŒåŸºç¡€äº¤äº’

![](assets/detail/19.png)

**å®ç°æ­¥éª¤**

1. å®Œæˆé™æ€å¸ƒå±€
2. å®šä¹‰APIæ¥å£
3. è·å–æ•°æ®æä¾›ç»™æ¨¡ç‰ˆ
4. æ¸²æŸ“æ¨¡ç‰ˆ

**ä»£ç è½åœ°**

1ï¼‰å®ç°é™æ€å¸ƒå±€

`src/views/goods/components/goods-comment.vue`

```html
<template>
  <div class="goods-comment">
    <div class="head" v-if="commentInfo">
      <div class="data">
        <p>
          <span>1000</span
          ><span>äººè´­ä¹°</span>
        </p>
        <p>
          <span>98</span
          ><span>å¥½è¯„ç‡</span>
        </p>
        <p>
          <span>234</span
          ><span>æ¡è¯„ä»·</span>
        </p>
        <p>
          <span>100</span>
          <span>æ¡æœ‰å›¾è¯„ä»·</span>
        </p>
      </div>
    </div>
  </div>
</template>
<script>
export default {
  name: 'GoodsComment'
}
</script>
<style scoped lang="less">
.goods-comment {
  .head {
    display: flex;
    padding: 30px 0;
    .data {
      flex:1;
      display: flex;
      padding: 20px;
      p {
        flex: 1;
        text-align: center;
        span {
          display: block;
          &:first-child {
            font-size: 32px;
            color: @priceColor;
          }
          &:last-child {
            color: #999;
          }
        }
      }
    }
  }
  .sort {
    height: 60px;
    line-height: 60px;
    border-top: 1px solid #f5f5f5;
    border-bottom: 1px solid #f5f5f5;
    margin: 0 20px;
    color: #666;
    > span {
      margin-left: 20px;
    }
    > a {
      margin-left: 30px;
      &.active,
      &:hover {
        color: @xtxColor;
      }
    }
  }
}
.list {
  padding: 0 20px;
  .item {
    display: flex;
    padding: 25px 10px;
    border-bottom: 1px solid #f5f5f5;
    .user {
      width: 160px;
      img {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        overflow: hidden;
      }
      span {
        padding-left: 10px;
        color: #666;
      }
    }
    .body {
      flex: 1;
      .score {
        line-height: 40px;
        .iconfont {
          color: #ff9240;
          padding-right: 3px;
        }
        .attr {
          padding-left: 10px;
          color: #666;
        }
      }
    }
    .text {
      color: #666;
      line-height: 24px;
    }
    .time {
      color: #999;
      display: flex;
      justify-content: space-between;
      margin-top: 5px;
    }
  }
}
</style>
```

2ï¼‰å°è£…æ¥å£ 

`src/api/goods.js`

> è¯„ä»·è¯¦æƒ…éœ€è¦æˆ‘ä»¬å•ç‹¬å°è£…æ¥å£å¤„ç†

```js
/**
 * @description: è·å–è¯„ä»·æ•°æ®
 * @param {*} id  å•†å“id
 * @return {*}
 */
export const findCommentInfoByGoods = (id) => {
  return request(`https://mock.boxuegu.com/mock/1175/goods/${id}/evaluate`, 'get')
}
```

3ï¼‰è·å–å¤„ç†æ•°æ® 

`src/views/goods/components/goods-comment.vue`

```js
import { findCommentInfoByGoods } from '@/api/goods'
import { ref } from 'vue'
import { useRoute } from 'vue-router'
export default {
  name: 'GoodsComment',
  setup () {
    const { commentInfo } = useCommentInfo()
    return { commentInfo }
  }
}
// è·å–è¯„ä»·æ•°æ®
function useCommentInfo () {
  const commentInfo = ref(null)
  const route = useRoute()
  const getCommentInfo = async () => {
    const data = await findCommentInfoByGoods(route.params.id)
    commentInfo.value = data.result
  }
  onMounted(() => {
    getCommentInfo()
  })
  return { commentInfo }
}
```

4ï¼‰æ¸²æŸ“æ¨¡æ¿

```html
<div class="head" v-if="commentInfo">
  <div class="data">
    <p>
      <span>{{ commentInfo.salesCount }}</span
      ><span>äººè´­ä¹°</span>
    </p>
    <p>
      <span>{{ commentInfo.praisePercent }}</span
      ><span>å¥½è¯„ç‡</span>
    </p>
    <p>
      <span>{{ commentInfo.evaluateCount }}</span
      ><span>æ¡è¯„ä»·</span>
    </p>
    <p>
      <span>{{ commentInfo.hasPictureCount}}</span>
      <span>æ¡æœ‰å›¾è¯„ä»·</span>
    </p>
  </div>
</div>
```

### 2. åˆ—è¡¨åŸºç¡€å®ç°

`æœ¬èŠ‚ç›®æ ‡:`  å®ç°åˆ—è¡¨æ•°æ®çš„åŸºç¡€å±•ç¤ºï¼ˆé»˜è®¤æŸ¥è¯¢æ¡ä»¶ä¸åŠ ç­›é€‰æ¡ä»¶ï¼‰

![](assets/detail/20.png)



**å®ç°æ­¥éª¤**

1. ç­›é€‰æ¡ä»¶å’Œåˆ—è¡¨åŸºç¡€å¸ƒå±€
2. ç­›é€‰æ¡ä»¶æ•°æ®å‡†å¤‡
3. è°ƒç”¨æ¥å£è·å–æ•°æ®
4. æ¸²æŸ“åˆ—è¡¨

**ä»£ç è½åœ°**

1ï¼‰åˆ—è¡¨åŸºç¡€å¸ƒå±€

> å‡†å¤‡ä¿©å¤„å¸ƒå±€ï¼Œä¸€å¤„ä¸ºæä¾›ç­›é€‰æ¡ä»¶çš„åŒºåŸŸï¼Œä¸€å¤„ä¸ºåˆ—è¡¨åŒºåŸŸ

```vue
<!-- æ’åº -->
<div class="sort">
  <span>æ’åºï¼š</span>
  <a
    href="javascript:;"
    :class="{ active: sortField === null }"
    >é»˜è®¤</a
  >
  <a
    href="javascript:;"
    :class="{ active: sortField === 'praiseCount' }"
    >æœ€çƒ­</a
  >
  <a
    href="javascript:;"
    :class="{ active: sortField === 'createTime' }"
    >æœ€æ–°</a
  >
  <XtxCheckbox  style="margin-left:50px;">æ˜¯å¦æœ‰å›¾</XtxCheckbox>
</div>
<!-- åˆ—è¡¨ -->
<div class="list">
  <div class="item">
    <div class="user">
      <img src="http://zhoushugang.gitee.io/erabbit-client-pc-static/uploads/avatar_1.png" alt="">
      <span>å…”****m</span>
    </div>
    <div class="body">
      <div class="score">
        <i class="iconfont icon-wjx01"></i>
        <i class="iconfont icon-wjx01"></i>
        <i class="iconfont icon-wjx01"></i>
        <i class="iconfont icon-wjx01"></i>
        <i class="iconfont icon-wjx02"></i>
        <span class="attr">é¢œè‰²ï¼šé»‘è‰² å°ºç ï¼šM</span>
      </div>
      <div class="text">ç½‘æ˜“äº‘appä¸Šè¿™æ¬¾è€³æœºéå¸¸ä¸é”™ æ–°äººä¸‹è½½ç½‘æ˜“äº‘è´­ä¹°è¿™æ¬¾è€³æœºä¼˜æƒ å¤§ è€Œä¸”è€³æœºğŸ§ç¡®å®æ­£å“ éŸ³è´¨ç‰¹åˆ«å¥½ æˆ´ä¸Šè¿™æ¬¾è€³æœº å¬éŸ³ä¹çœ‹ç”µå½±æ•ˆæœå£°éŸ³çœŸæ˜¯å¤ªæ£’äº† æ— çº¿æ–¹ä¾¿ å°ç›’è‡ªåŠ¨å……ç”µ æœ€ä¸»è¦æ˜¯è´¨é‡å¥½éŸ³è´¨æ£’ æƒ³è¦ä¹°è€³æœºçš„æ”¾å¿ƒæ‹ éŸ³æ•ˆå·´å·´æ»´ è€æ£’äº†</div>
      <div class="time">
        <span>2020-10-10 10:11:22</span>
        <span class="zan"><i class="iconfont icon-dianzan"></i>100</span>
      </div>
    </div>
  </div>
</div>
<style>
 .list {
    padding: 0 20px;
    .item {
      display: flex;
      padding: 25px 10px;
      border-bottom: 1px solid #f5f5f5;
      .user {
        width: 160px;
        img {
          width: 40px;
          height: 40px;
          border-radius: 50%;
          overflow: hidden;
        }
        span {
          padding-left: 10px;
          color: #666;
        }
      }
      .body {
        flex: 1;
        .score {
          line-height: 40px;
          .iconfont {
            color: #ff9240;
            padding-right: 3px;
          }
          .attr {
            padding-left: 10px;
            color: #666;
          }
        }
      }
      .text {
        color: #666;
        line-height: 24px;
      }
      .time {
        color: #999;
        display: flex;
        justify-content: space-between;
        margin-top: 5px;
      }
    }
  }
</style>
```

2ï¼‰å‡†å¤‡ç­›é€‰å‚æ•°è·å–æ•°æ®ï¼ˆåŸºç¡€é»˜è®¤æ¡ä»¶ï¼‰

> å› ä¸ºè¯„ä»·åˆ—è¡¨è¿˜æ²¡æœ‰çœŸå®æ¥å£æ•°æ®ï¼Œæˆ‘ä»¬é‡‡å–å•ç‹¬çš„æ¥å£æ¥è·å–åˆ—è¡¨

`api/goods.js`

```js
/**
 * @description: è·å–è¯„ä»·åˆ—è¡¨
 * @param {*} id  å•†å“id
 * @return {*}
 */
export const findCommentListByGoods = (id, data) => {
  return request(`https://mock.boxuegu.com/mock/1175/goods/${id}/evaluate/page`, 'get', data)
}
```

`goods-comment.vue`

```js
// å¯¼å…¥æ¥å£
import { findCommentListByGoods } from '@/api/goods'

// è·å–è¯„è®ºæ•°æ®
function useCommentList () {
  const route = useRoute()
  // ç­›é€‰æ¡ä»¶å‡†å¤‡
  const reqParams = reactive({
    page: 1,
    pageSize: 10,
    hasPicture: false,//æ˜¯å¦æœ‰
    sortField: null, // æ’åº: praiseCount -> æœ€çƒ­ createTime -> æœ€æ–°
  })
  // è¯„ä»·åˆ—è¡¨
  const commentList = ref([])
  onMounted(async () => {
    const data = await findCommentListByGoods(route.params.id, reqParams)
    commentList.value = data.result.items
  })
  return { commentList }
}

setup () {
    const { commentList } = useCommentList()
    return { commentList }
}
```

3ï¼‰æ¸²æŸ“æ¨¡æ¿list

```html
 <!-- åˆ—è¡¨ -->
<div class="list">
  <div class="item" v-for="item in commentList" :key="item.id">
    <div class="user">
      <img :src="item.member.avatar" alt="" />
      <span>{{ item.member.nickname }}</span>
    </div>
    <div class="body">
      <div class="score">
        <i
          v-for="i in item.score"
          :key="i + '1'"
          class="iconfont icon-wjx01"
        ></i>
        <i
          v-for="i in 5 - item.score"
          :key="i + '2'"
          class="iconfont icon-wjx02"
        ></i>
        <span class="attr">{{ item.orderInfo.specsText }}</span>
      </div>
      <div class="text">{{ item.content }}</div>
      <div class="time">
        <span>{{ item.createTime }}</span>
        <span class="zan"
          ><i class="iconfont icon-dianzan"></i>
          {{ item.praiseCount }}</span
        >
      </div>
    </div>
  </div>
</div>
```

### 3. æ¡ä»¶ç­›é€‰(éš¾ç‚¹)

`æœ¬èŠ‚ç›®æ ‡:`  å®ç°åˆ—è¡¨æ•°æ®çš„è‡ªå®šä¹‰æ¡ä»¶ç­›é€‰

**å®ç°æ€è·¯**

1. é€šè¿‡æ’åºæŒ‰é’®æ”¶é›†æ’åºæŸ¥è¯¢å­—æ®µ
2. é€šè¿‡å¤šé€‰æ¡†æ”¶é›†æ˜¯å¦æœ‰å›¾æŸ¥è¯¢å­—æ®µ
3. é€šè¿‡watchç›‘å¬æ’åºå’Œå¤šé€‰æ¡†å­—æ®µï¼Œæœ‰å˜åŒ–å†æ¬¡å‘èµ·æ¥å£è¯·æ±‚

```js
// è·å–è¯„è®ºæ•°æ®
function useCommentList () {
  const route = useRoute()
  // ç­›é€‰æ¡ä»¶å‡†å¤‡
  const reqParams = reactive({
    page: 1,
    pageSize: 10,
    hasPicture: false, // æ˜¯å¦å³å›¾
    sortField: null // æ’åº
  })
  // åˆ‡æ¢æ’åº
  function changeSort (field) {
    reqParams.sortField = field
  }
  // ç›‘å¬æŸ¥è¯¢æ¡ä»¶å˜åŒ–é‡æ–°æ‹‰å–æ•°æ®
  watch(() => {
    return reqParams
  }, () => {
    loadCommentList()
  }, { deep: true })

  // è¯„ä»·åˆ—è¡¨
  const commentList = ref([])
  async function loadCommentList () {
    const data = await findCommentListByGoods(route.params.id, reqParams)
    commentList.value = data.result.items
  }
  onMounted(async () => {
    loadCommentList()
  })

  return { commentList, changeSort, reqParams }
}
```

### 4. å›¾ç‰‡é¢„è§ˆåŠŸèƒ½

![](assets/detail/21.png)

**å®ç°æ­¥éª¤**

1. å‡†å¤‡ä¸€ä¸ªç»„ä»¶å¯¼å…¥`goods-comment.vue`ä½¿ç”¨èµ·æ¥
2. å°†å•†å“å›¾ç‰‡åˆ—è¡¨ä½œä¸ºpropsä¼ å…¥
3. å±•ç¤ºå›¾ç‰‡åˆ—è¡¨å®ç°é€‰ä¸­å›¾ç‰‡åŠŸèƒ½
4. æä¾›å›¾ç‰‡é¢„è§ˆåŠŸèƒ½å’Œå…³é—­å›¾ç‰‡é¢„è§ˆ

**ä»£ç è½åœ°**

1ï¼‰æ–°å¢å›¾ç‰‡æŸ¥çœ‹ç»„ä»¶

`src/views/goods/goods-comment-image.vue`

```html
<template>
  <div class="goods-comment-image">
    <div class="list">
      <a
        href="javascript:;"
        :class="{active:currImage===url}"
        @click="currImage=url"
        v-for="url in pictures"
        :key="url"
      >
        <img :src="url" alt="">
      </a>
    </div>
    <div class="preview"></div>
  </div>
</template>
<script>
import { ref } from 'vue'
export default {
  name: 'GoodsCommentImage',
  props: {
    pictures: {
      type: Array,
      default: () => []
    }
  },
  setup () {
    // å½“å‰æ˜¾ç¤ºå›¾ç‰‡url
    const currImage = ref(null)
    return { currImage }
  }
}
</script>
<style scoped lang="less">
.goods-comment-image {
  .list {
    display: flex;
    flex-wrap: wrap;
    margin-top: 10px;
    a {
      width: 120px;
      height: 120px;
      border:1px solid #e4e4e4;
      margin-right: 20px;
      margin-bottom: 10px;
      img {
        width: 100%;
        height: 100%;
        object-fit: contain;
      }
      &.active {
        border-color: @xtxColor;
      }
    }
  }
}
</style>
```

2ï¼‰å¯¼å…¥è¯„è®ºç»„ä»¶ä½¿ç”¨

```jsx
import GoodsCommentImage from './goods-comment-image'

components: {
    GoodsCommentImage
}

<div class="text">{{ item.content }}</div>
<!-- ä½¿ç”¨å›¾ç‰‡é¢„è§ˆç»„ä»¶ -->
<GoodsCommentImage v-if="item.pictures.length" :pictures="item.pictures" />
```

3ï¼‰å®ç°å›¾ç‰‡æ”¾å¤§é¢„è§ˆåŠŸèƒ½

> æ€è·¯ï¼š
>
> 1. å½“currImageæœ‰å€¼ä¹‹åï¼Œæ˜¾ç¤ºé¢„è§ˆåŒºåŸŸ
> 2. ç‚¹å‡»å…³é—­æŒ‰é’®ï¼Œæ¸…ç©ºcurrImage

```html
<div class="preview" v-if="currImage">
  <img :src="currImage" alt="">
  <i @click="currImage = null" class="iconfont icon-close-new"></i>
</div>
```

## çƒ­æ¦œç»„ä»¶å®ç°

`æœ¬èŠ‚ç›®æ ‡:`  å±•ç¤º24å°æ—¶çƒ­æ¦œå•†å“ï¼Œå’Œå‘¨çƒ­æ¦œå•†å“

![](assets/detail/16.png)

**å®ç°æ­¥éª¤**

1. å®šä¹‰ä¸€ä¸ªç»„ä»¶ï¼Œå®Œæˆå¤šä¸ªç»„ä»¶å±•ç°å‹æ€ï¼Œæ ¹æ®ä¼ å…¥ç»„ä»¶çš„ç±»å‹å†³å®š
   - 1ä»£è¡¨24å°æ—¶çƒ­é”€æ¦œ 	2ä»£è¡¨å‘¨çƒ­é”€æ¦œ	 3ä»£è¡¨æ€»çƒ­é”€æ¦œ
2. è·å–æ•°æ®ï¼Œå®Œæˆå•†å“å±•ç¤ºå’Œæ ‡é¢˜æ ·å¼çš„è®¾ç½®

### 1. å®šä¹‰ç»„ä»¶

`src/views/goods/components/goods-hot.vue`

```html
<template>
  <div class="goods-hot">
    <h3>{{ title }}</h3>
    <!-- å•†å“åŒºå— -->
    <goods-item v-for="good in 4"/>
  </div>
</template>
<script>
import { computed } from 'vue'
import GoodsItem from '@/views/Category/components/goods-item'
export default {
  name: 'GoodsHot',
  components: {
    GoodsItem
  },
  props: {
    type: {
      type: Number,
      default: 1
    }
  },
  setup (props) {
    const titleObj = { 1: '24å°æ—¶çƒ­é”€æ¦œ', 2: 'å‘¨çƒ­é”€æ¦œ', 3: 'æ€»çƒ­é”€æ¦œ' }
    const title = computed(() => {
      return titleObj[props.type]
    })
    return { title }
  }
}
</script>
<style scoped lang="less">
.goods-hot {
  h3 {
    height: 70px;
    background: @helpColor;
    color: #fff;
    font-size: 18px;
    line-height: 70px;
    padding-left: 25px;
    margin-bottom: 10px;
    font-weight: normal;
  }
}
</style>
```

2ï¼‰ä½¿ç”¨ç»„ä»¶

`src/views/goods/index.vue`

```jsx
import GoodsHot from './components/goods-hot'

components: { GoodsImage, GoodsSales, GoodsName, GoodsSku, GoodsHot }
    
<div class="goods-aside">
  <GoodsHot :type="1" />
  <GoodsHot :type="2" />
  <GoodsHot :type="3" />
</div>
```

### 2. è·å–æ•°æ®æ¸²æŸ“ç»„ä»¶

`src/api/goods.js`

```js
/**
 * è·å–çƒ­æ¦œå•†å“
 * @param {Number} id - å•†å“id
 * @param {Number} type - 1ä»£è¡¨24å°æ—¶çƒ­é”€æ¦œ 2ä»£è¡¨å‘¨çƒ­é”€æ¦œ 3ä»£è¡¨æ€»çƒ­é”€æ¦œ
 * @param {Number} limit - è·å–ä¸ªæ•°
 */
export const findHotGoods = ({id, type, limit = 3}) => {
  return request('/goods/hot', 'get', {id, type, limit })
}
```

`src/views/goods/components/goot-hot.vue`

```jsx
import { computed, ref } from 'vue'
import { findHotGoods } from '@/api/goods'
import { useRoute } from 'vue-router'
export default {
  name: 'GoodsHot',
  props: {
    type: {
      type: Number,
      default: 1
    }
  },
  components: { GoodsItem },
  setup (props) {
    // å¤„ç†æ ‡é¢˜
    const titleObj = { 1: '24å°æ—¶çƒ­é”€æ¦œ', 2: 'å‘¨çƒ­é”€æ¦œ', 3: 'æ€»çƒ­é”€æ¦œ' }
    const title = computed(() => {
      return titleObj[props.type]
    })
    // å•†å“åˆ—è¡¨
    const route = useRoute()
    const goodsList = ref([])
    findHotGoods({ id: route.params.id, type: props.type }).then(data => {
      goodsList.value = data.result.map(item => {
        item.tag = item.desc
        return item
      })
    })
    return { title, goodsList }
  }
}

<template>
  <div class="goods-hot">
    <h3>{{ title }}</h3>
    <goods-item v-for="good in goodsList" :key="good.id" :goods="good" />
  </div>
</template>
```
